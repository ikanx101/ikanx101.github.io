---
title: "Update COVID-19: Indonesia Pecah Rekor Lagi!"
output: 
  github_document:
    pandoc_args: --webtex
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
setwd("~/Documents/ikanx101.com/_posts/Covid Update")
options(scipen = 99)
library(dplyr)
library(ggplot2)
library(ggpubr)
library(gganimate)

data = read.csv("/home/ikanx101githubio/Documents/belajaR/Bukan Infografis/Covid Data/owid-covid-data.csv")

target = c("Indonesia","Italy")

banding = 
  data %>% 
  filter(location %in% target) %>% 
  mutate(date = as.Date(date))
```

Sudah hampir seminggu DKI Jakarta melaksanakan [PSBB tahap II](https://ikanx101.com/blog/psbbt/). Tapi masih sering kita mendengar berita penambahan kasus COVID-19 masih tinggi. Terutama di wilayah DKI Jakarta.

Kalau boleh saya beropini, kondisi penyebaran virus saat ini mungkin sudah masuk ke dalam tahap tidak terkontrol. Kenapa? Makin hari rekor penambahan kasus terus terpecahkan.

Berbekal data yang dihimpun di situs [_Our World in Data_](https://ourworldindata.org/coronavirus) per malam ini (24 September 2020 pukul 20.00 WIB), saya akan coba membuat visualisasinya kembali.

## _Cumulative Confirmed Cases_

Kali inipun saya masih ingin membandingkan `Indonesia` dengan `Italy`. Jika tren penambahan kasus tetap seperti ini, bukan tidak mungkin di beberapa minggu ke depan, `Indonesia` bisa menyalip `Italy`. 

```{r,echo=FALSE,fig.width=8,fig.retina=10,message=FALSE,warning=FALSE}
banding %>% 
  mutate(tot = total_cases/1000,
         tot = paste0(round(tot,1),"ribu"),
         label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>% 
  ggplot(aes(x = date,
             y = total_cases,)) +
  geom_line(aes(group = location,color = location)) +
  ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
  labs(title = "Cumulative Confirmed Cases: Indonesia vs Italy",
       subtitle = "Apakah Indonesia akan menyalip Italy?",
       x = "Tanggal",
       y = "Banyak Kasus Kumulatif",
       caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
  theme_pubclean() +
  theme(legend.position = 'none',
        axis.text.y = element_blank(),
        plot.title = element_text(face = "bold"),
        plot.subtitle = element_text(face = "italic",size = 10))
```

----

## _New Confirmed Cases per Day_

Indonesia baru saja memecahkan rekor penambahan kasus tertinggi lagi!

```{r,echo=FALSE,fig.width=8,fig.retina=10,message=FALSE,warning=FALSE}
banding %>% 
  mutate(new_cases = ifelse(is.na(new_cases),0,new_cases),
         tot = new_cases/1000,
         tot = paste0(round(tot,1),"ribu")) %>%
  group_by(location) %>% 
  mutate(label = ifelse(new_cases == max(new_cases),
                        paste(location,tot,sep = "~"),
                        NA)) %>% 
  ungroup() %>% 
  ggplot(aes(x = date,
             y = new_cases,)) +
  geom_line(aes(group = location,color = location)) +
  geom_label(aes(label = label,color = location),hjust = 1,vjust = 1) +
  labs(title = "New Confirmed Cases per Day",
       subtitle = "Berapa rekor terbanyak penambahan confirmed cases per day dari setiap negara ini?",
       x = "Tanggal",
       y = "Banyak Kasus Baru harian",
       caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
  theme_pubclean() +
  theme(legend.position = 'none',
        axis.text.y = element_blank(),
        plot.title = element_text(face = "bold"),
        plot.subtitle = element_text(face = "italic",size = 10))
```


----

## _Positive Rate_

Perhari ini, `positive rate` Indonesia masih relatif tinggi. Data terakhir menunjukkan `positive rate` Indonesia ada di angka `18%`.

Artinya apa?

> Simpelnya: dari `100` orang yang dites swab, `18` di antaranya positif.


Jika dibandingkan dengan tulisan saya yang lalu pada [14 September 2020](https://ikanx101.com/blog/psbbt/), angka ini lebih rendah. Namun perlu diingat, bahwa penurunan _positive rate_ itu bisa terjadi akibat dua hal:

$Positive_{rate} = \frac{\sum{confirmed}}{\sum{tested}}$

- Memperbanyak jumlah _test_.
- Menekan penyebaran penyakit.

Hal yang terjadi saat ini saya duga lebih ke jumlah _test_ yang lebih banyak dibandingkan 14 September 2020 yang lalu.

```{r,echo=FALSE,fig.width=8,fig.retina=10,message=FALSE,warning=FALSE}
library(tidyr)

target = c("Indonesia","India","United States")
komparasi = 
  data %>% 
  filter(location %in% target) %>% 
  mutate(date = as.Date(date))

komparasi %>% 
  group_by(location) %>% 
  fill(positive_rate,
       .direction = 'down') %>% 
  ungroup() %>% 
  mutate(tot = positive_rate*100,
         tot = paste0(round(tot,1),"%"),
         label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>% 
  ggplot(aes(x = date,
             y = positive_rate,)) +
  ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
  geom_line(aes(group = location,color = location)) +
  labs(title = "Positive Rate for Selected Country",
       subtitle = "Indonesia masih belum ada tanda-tanda menurun!",
       x = "Tanggal",
       y = "Banyak Orang yang Positif\ndari Total Orang yang di Test",
       caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
  theme_pubclean() +
  theme(legend.position = 'none',
        axis.text.y = element_blank(),
        plot.title = element_text(face = "bold"),
        plot.subtitle = element_text(face = "italic",size = 10))
```

