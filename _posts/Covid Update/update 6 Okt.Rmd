---
title: "Update COVID-19: Recovery Rate di Indonesia Bagus, Tapi..."
output: 
  github_document:
    pandoc_args: --webtex
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
setwd("~/Documents/ikanx101.com/_posts/Covid Update")
options(scipen = 99)
library(dplyr)
library(ggplot2)
library(ggpubr)
library(gganimate)
library(readxl)

# italy
data = read.csv("/home/ikanx101githubio/Documents/belajaR/Bukan Infografis/Covid Data/owid-covid-data.csv")
target = "Italy"
itali = 
  data %>% 
  filter(location %in% target) %>% 
  mutate(date = as.Date(date))

# indonesia
indo = read_excel("/home/ikanx101githubio/Documents/belajaR/Bukan Infografis/Covid Data/COVID-19 di Indonesia @kawalcovid19.xlsx") %>% janitor::clean_names()
indo = 
  indo %>% 
  mutate(date = as.Date(x1)
         )

itali_gab = itali %>% select(date,total_cases)
indo_gab = indo %>% select(date,total_kasus)
```

Sampai saat ini belum ada tanda-tanda penurunan penyebaran COVID 19 di Indonesia. Justru kalau kita lihat data yang dikumpulkan oleh para relawan di situs [Kawal Covid](https://kawalcovid19.id/), ada beberapa temuan yang menarik menurut saya. 

Apa saja?

Berbekal data yang dihimpun dari situs tersebut dan [_Our World in Data_](https://ourworldindata.org/coronavirus), _yuk_ mari kita lihat bersama!

---

# _Cumulative Cases_

Sama seperti beberapa tulisan saya [sebelumnya](https://ikanx101.com/tags/#corona-virus), saya masih ingin membandingkan total kasus (kumulatif) Indonesia dengan Italy.

> Kenapa dibandingkan dengan Italy?

Saya sudah pernah menjelaskannya di [tulisan saya sebelumnya](https://ikanx101.com/blog/psbbt/#cumulative-confirmed-cases).

```{r,echo=FALSE,fig.width=8,fig.retina=10,message=FALSE,warning=FALSE}
gabung = merge(itali_gab,indo_gab)

gabung %>% 
  reshape2::melt(id.vars = "date") %>% 
  mutate(variable = ifelse(variable == "total_cases","Italy","Indonesia")) %>% 
  rename(negara = variable,
         kasus = value) %>% 
  mutate(label = kasus/1000,
         label = round(label,1),
         label = paste0(negara,"\n",label," ribu")) %>% 
  group_by(negara) %>% 
  mutate(label = ifelse(date == max(date),label,NA)) %>% 
  ggplot(aes(x = date,
             y = kasus,
             color = negara)) +
  geom_line(size = 2) +
  scale_color_brewer(palette = "Dark2") +
  ggrepel::geom_label_repel(aes(label = label)) +
  theme_pubclean() +
  labs(title = "Perbandingan Total Kasus COVID-19: Italy vs Indonesia",
       subtitle = "Sumber data: Ourworldindata dan Kawal Covid\n6 Oktober 2020 04.45 WIB",
       x = "Tanggal",
       y = "Total Kasus",
       caption = "Visualized using R\nikanx101.com") +
  theme(axis.text.y = element_blank(),
        legend.position = "none")


```

Pada bulan lalu saya sempat menduga bahwa Indonesia akan menyalip angka Italy dalam rentang waktu yang relatif tidak lama. Tapi sepertinya di Italy ada gelombang kedua sehingga angkanya juga relatif meningkat dibandingkan bulan lalu. Tentu ini hal yang tidak baik untuk kedua negara ini.

> Analoginya seperti perlombaan tapi bukan dalam hal yang positif.

---

# Penambahan Kasus vs Sembuh vs Meninggal (Harian) di Indonesia

Salah satu isu yang diangkat oleh pemerintah dan beberapa media beberapa hari ini adalah tingkat kesembuhan pasien COVID 19 yang semakin naik. Setiap harinya, banyaknya orang yang sembuh sudah semakin tinggi dibandingkan orang yang meninggal dan angka penambahan kasus baru.

```{r,echo=FALSE,fig.width=8,fig.retina=10,message=FALSE,warning=FALSE}
indo %>% 
  select(date,kasus_baru,sembuh_baru,meninggal_baru) %>% 
  reshape2::melt(id.vars = "date") %>% 
  mutate(variable = gsub("\\_"," ",variable),
         variable = stringr::str_to_title(variable)
         ) %>% 
  rename(jenis = variable,
         n = value) %>% 
  ggplot(aes(x = date,
             y = n,
             color = jenis)) +
  geom_line(size = .6) +
  scale_color_brewer(palette = "Dark2") +
  theme_pubclean() +
  labs(title = "Perbandingan Penambahan Kasus Baru vs Sembuh Baru vs Meninggal Baru Harian\ndi Indonesia",
       subtitle = "Sumber data: Kawal Covid\n6 Oktober 2020 04.45 WIB",
       x = "Tanggal",
       caption = "Visualized using R\nikanx101.com",
       fill = "Keterangan") +
  theme(axis.title.y = element_blank(),
        legend.position = "bottom")
```

Jika kita ingat kembali saat di awal-awal pandemi terjadi di Indonesia, angka kematian melebihi angka kesembuhan. Namun sekarang kita bisa melihat dari grafik di atas bahwa memang angka kesembuhan sudah relatif meningkat. Penambahan orang sembuh setiap harinya hampir sama dengan penambahan kasus positif COVID 19 baru.

_Recovery rate_ di Indonesia per hari ini sudah mencapai angka `75.7%`. Namun demikian, apakah angka ini sudah bagus? Mari kita bandingkan dengan negara lainnya!

---

# Perbandingan _Recovery Rate_ dari Seluruh Negara

Saya mengambil data dari situs [Worldometers](https://www.worldometers.info/coronavirus/) pagi ini pukul 04.45 WIB. Mari kita lihat dulu sebaran data _recovery rate_ dari seluruh negara di dunia.

```{r,echo=FALSE,fig.width=8,fig.retina=10,message=FALSE,warning=FALSE}
load("world.rda")
dunia = 
  dunia %>% 
  filter(country_other != "") %>% 
  filter(!country_other %in% c("Total:",
                               "North America",
                               "Asia",
                               "South America",
                               "Europe",
                               "Africa",
                               "Oceania",
                               "World"))

dunia %>% 
  ggplot(aes(x = recovery_rate)) +
  geom_density(color = "steelblue",fill = "red",alpha = .6,size = 1.25) +
  theme_pubclean() +
  labs(title = "Sebaran Recovery Rate dari Seluruh Negara di Dunia",
       subtitle = "Sumber data: Worldometers\n6 Oktober 2020 04.45 WIB",
       x = "Recovery Rate",
       caption = "Visualized using R\nikanx101.com") +
  theme(axis.title.y = element_blank(),
        axis.text.y = element_blank()) +
  geom_vline(xintercept = .757) +
  annotate("label",x = .74,y = 2.5, label = "Indonesia\n75.7%")
```

Ternyata, walaupun Indonesia memiliki _recovery rate_ yang relatif `tinggi` tapi masih banyak negara lain yang memiliki _recovery rate_ yang lebih tinggi (berada di _range_ > `90%`).

Negara mana saja? Berikut visualisasinya:

```{r,echo=FALSE,fig.width=8,fig.height=20,fig.retina=10,message=FALSE,warning=FALSE}
dunia %>% 
  mutate(warna = ifelse(country_other == "Indonesia",1,0),
         label = ifelse(warna == 1, 
                        paste0(round(recovery_rate*100,2),"%"),
                        NA)
         ) %>% 
  ggplot(aes(x = reorder(country_other,recovery_rate),
             y = recovery_rate)) +
  geom_col(aes(fill = warna)) +
  geom_label(aes(label = label),size = 3) +
  scale_color_brewer(palette = "Dark2") +
  coord_flip() +
  theme_pubclean() +
  labs(title = "Recovery Rate per Negara",
       subtitle = "Sumber data: Worldometers\n6 Oktober 2020 04.45 WIB",
       x = "Negara",
       caption = "Visualized using R\nikanx101.com") +
  theme(axis.title.x = element_blank(),
        axis.text.x = element_blank(),
        axis.text.y = element_text(size = 7),
        legend.position = "none")
```


Besar harapan kita agar angka ini selalu bergerak naik mengikuti negara-negara lain.

---

# Kasus Aktif Harian di Indonesia

Data terakhir yang ingin saya tunjukkan adalah angka kasus aktif harian. Mari kita lihat visualisasi berikut:

```{r,echo=FALSE,fig.width=8,fig.retina=10,message=FALSE,warning=FALSE}
indo %>% 
  ggplot(aes(x = date,
             y = kasus_aktif)) +
  geom_line(group = 1,size = 2,color = "darkred") +
  geom_vline(xintercept = as.Date("2020-05-23"),color = "darkgreen") +
  geom_vline(xintercept = as.Date("2020-07-30"),color = "brown") +
  geom_vline(xintercept = as.Date("2020-08-17")) +
  theme_pubclean() +
  labs(title = "Kasus Aktif Harian di Indonesia",
       subtitle = "Sumber data: Kawal Covid\n6 Oktober 2020 04.45 WIB",
       x = "Tanggal",
       y = "Kasus Aktif",
       caption = "Visualized using R\nikanx101.com") +
  annotate("label",x = as.Date("2020-05-23"),y = 45000, label = "Idul Fitri",color = "darkgreen") +
  annotate("label",x = as.Date("2020-07-30"),y = 45000, label = "Idul Adha",color = "brown") +
  annotate("label",x = as.Date("2020-08-17"),y = 50000, label = "HUT RI")
```

Ternyata setelah sempat melandai di masa-masa Idul Adha hingga Agustus, kasus aktif harian di Indonesia meningkat kembali sejak September hingga saat ini.

---

## Kesimpulan

Melihat data-data di atas, kita masih harus waspada terhadap pandemi ini. Jaga diri dan komunal dari COVID 19.