---
title: "Web Scraping BNPB: Waspada Bencana di Indonesia!"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
setwd("/cloud/project/_posts/web scraping/post 5 BNPB")
rm(list=ls())
library(readxl)
library(dplyr)
data = read_excel("Data Bencana.xlsx",skip = 1) %>% janitor::clean_names()
```

Beberapa hari yang lalu, masyarakat Indonesia berduka. Saudara-saudara kita yang ada di Nusa Tengggara Timur (NTT) tertimpa musibah banjir bandang. Sekilas saya melihat beritanya di beberapa stasiun TV nasional, video yang terekam cukup mencengangkan dan memprihatinkan. 

Tanpa kita sadari, selama 1 Januari - 9 Maret 2021 ini ternyata sudah ada `763` bencana terjadi di Indonesia (sumber: [Kompas.com](https://www.kompas.com/tren/read/2021/03/10/203500465/data-terbaru-bnpb--763-bencana-terjadi-sepanjang-2021?page=all)). Jika saya hitung kasar dari artikel tersebut, setidaknya terjadi rata-rata `r round(763/67,1)` bencana setiap harinya.

> Sebuah angka yang lumayan _yah_.

---

Pagi ini (7 April 2021 10.30 WIB) saya coba mengambil data bencana dari situs [GIS BNPB](https://gis.bnpb.go.id/) untuk kemudian dieksplorasi.

Ternyata dari 1 Januari - 7 April 2021 sudah terjadi `1.113` bencana di Indonesia. Tentunya sudah bertambah dibandingkan berita Kompas yang lalu.

Berikut adalah cuplikan dari datanya:

```{r,echo=FALSE}
data$tanggal_kejadian = as.Date(data$tanggal_kejadian,"%Y-%m-%d")
id = sample(1113,10)
data %>% filter(no %in% id) %>% knitr::kable()
```

Sekarang kita akan lakukan eksplorasi sederhana dari data di atas:

# Bencana Per Bulan

Mari kita lihat sebaran bencana yang terjadi per bulan:

```{r,echo=FALSE}
library(ggplot2)

data %>%
  mutate(bulan = lubridate::month(tanggal_kejadian,label = T)) %>% 
  group_by(bulan,kejadian) %>% 
  count() %>% 
  ungroup() %>% 
  ggplot(aes(x = bulan,
             y = n,
             fill = kejadian)) +
  geom_col(position = "dodge") +
  geom_label(aes(label = n),
             position = position_dodge())
```

