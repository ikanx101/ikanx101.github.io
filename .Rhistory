y = total_deaths,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Cieeee... Banyak Penggemar Liga Italy yah di Indonesia?\nPengen banget samaan",
x = "Tanggal",
y = "Banyak Kasus Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(tot = total_deaths/1000,
tot = paste0(round(tot,1),"ribu"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = total_deaths,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(new_cases = ifelse(is.na(new_cases),0,new_cases),
tot = new_cases/1000,
tot = paste0(round(tot,1),"ribu")) %>%
group_by(location) %>%
mutate(label = ifelse(new_cases == max(new_cases),
paste(location,tot,sep = "~"),
NA)) %>%
ungroup() %>%
ggplot(aes(x = date,
y = new_cases,)) +
geom_line(aes(group = location,color = location)) +
geom_label(aes(label = label,color = location),hjust = 1,vjust = 1) +
labs(title = "New Confirmed Cases per Day",
subtitle = "Berapa rekor terbanyak penambahan confirmed cases per day dari setiap negara ini?",
x = "Tanggal",
y = "Banyak Kasus Baru harian",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(tot = total_deaths/1000,
tot = paste0(round(tot,1),"ribu"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = total_deaths,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Meninggal Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(tot = total_tests/1000,
tot = paste0(round(tot,1),"ribu"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = total_tests,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Meninggal Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(tot = total_tests/1000000,
tot = paste0(round(tot,1),"juta"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = total_tests,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Meninggal Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(total_tests = ifelse(is.na(total_tests),0,total_tests),
tot = total_tests/1000000,
tot = paste0(round(tot,1),"juta"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = total_tests,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Meninggal Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(positive_rate = ifelse(is.na(positive_rate),0,positive_rate),
tot = positive_rate/1000000,
tot = paste0(round(tot,1),"juta"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = positive_rate,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Meninggal Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(positive_rate = ifelse(is.na(positive_rate),0,positive_rate),
tot = positive_rate,
tot = paste0(round(tot,1),"%"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = positive_rate,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Meninggal Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>%
mutate(positive_rate = ifelse(is.na(positive_rate),0,positive_rate),
tot = positive_rate*100,
tot = paste0(round(tot,1),"%"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = positive_rate,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location,linetype = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Meninggal Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
data %>% filter(location == "Indonesia") %>% View()
data %>%
mutate(positive_rate = ifelse(is.na(positive_rate),0,positive_rate),
tot = positive_rate*100,
tot = paste0(round(tot,1),"%"),
label = ifelse(date == max(date),paste(location,tot,sep = "~"),NA)) %>%
ggplot(aes(x = date,
y = positive_rate,)) +
ggrepel::geom_label_repel(aes(label = label,color = location),hjust = 1,vjust = 1) +
geom_line(aes(group = location,color = location)) +
labs(title = "Cumulative Total Deaths for Selected Country",
subtitle = "Saatnya bertindak agar angka ini tidak terus bertambah lagi!",
x = "Tanggal",
y = "Banyak Kasus Meninggal Kumulatif",
caption = "Scraped and Visualized\nUsing R\nikanx101.com") +
theme_pubclean() +
theme(legend.position = 'none',
axis.text.y = element_blank(),
plot.title = element_text(face = "bold"),
plot.subtitle = element_text(face = "italic",size = 10))
setwd("~/Documents/belajaR/Bukan Infografis/olive oil tokped/Tokopedia")
source('~/Documents/belajaR/Bukan Infografis/olive oil tokped/Tokopedia/scrap topeds.R', echo=TRUE)
setwd("~/Documents/belajaR/Bukan Infografis/olive oil tokped/Shopee")
rm(list=ls())
library(dplyr)
library(jsonlite)
load('hasil scrape.rda')
# bikin fungsi scrape
scrape_shopee = function(url){
# buka json
tes = read_json(url)
#bentuk data frame
data = data.frame(
nama = tes$item$name,
terjual = tes$item$historical_sold,
merek = ifelse(is.null(tes$item$brand),'Tidak Ada Merek',tes$item$brand),
harga = tes$item$price,
harga_normal = tes$item$price_before_discount,
link = url
)
return(data)
}
i = 1
data = scrape_shopee(url[i])
for(i in 2:length(url)){
temp = scrape_shopee(url[i])
data = rbind(data,temp)
print(paste0('Alhamdulillah ',i,' sudah didapatkan...'))
}
for(i in 297:length(url)){
temp = scrape_shopee(url[i])
data = rbind(data,temp)
print(paste0('Alhamdulillah ',i,' sudah didapatkan...'))
}
for(i in 525:length(url)){
temp = scrape_shopee(url[i])
data = rbind(data,temp)
print(paste0('Alhamdulillah ',i,' sudah didapatkan...'))
}
for(i in 728:length(url)){
temp = scrape_shopee(url[i])
data = rbind(data,temp)
print(paste0('Alhamdulillah ',i,' sudah didapatkan...'))
}
<<<<<<< HEAD
data$waktu.scrape = Sys.time()
data = distinct(data)
raw = rbind(raw,data)
save(raw,url,file = 'hasil scrape.rda')
=======
data = data.frame(id = c(1:100))
data
pintu()
pintu()
pintu()
pintu()
pintu()
data$hasil = sapply(id,pintu
data$hasil = sapply(id,pintu
)
data$hasil = sapply(id,pintu)
data$hasil = sapply(data$id,pintu)
>>>>>>> 58957bbf97561e4f4e77fb21080297d14dd1cf90
>>>>>>> 6b1d2323d2ba462e37fcac123b2cb42cc5c6e39e
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/ikanx101.com/_posts/data carpentry/bpom")
rm(list=ls())
knitr::include_graphics("https://raw.githubusercontent.com/ikanx101/Live-Session-Nutrifood-R/master/bpom.png")
# url = 'nama url di sini'
# data = read_html(url) %>% {
#   tibble(
#     ket = html_nodes(.,'td:nth-child(2)') %>% html_text(),
#     md = html_nodes(.,'td:nth-child(1)') %>% html_text(),
#     pt = html_nodes(.,'td~ td+ td') %>% html_text()
#   )
# }
data = read.csv("/home/ikanx101githubio/Documents/Live-Session-Nutrifood-R/hasil scrape BPOM.csv")
knitr::kable(head(data))
str(data)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/ikanx101.com/_posts/data carpentry/bpom")
rm(list=ls())
knitr::include_graphics("https://raw.githubusercontent.com/ikanx101/Live-Session-Nutrifood-R/master/bpom.png")
# url = 'nama url di sini'
# data = read_html(url) %>% {
#   tibble(
#     ket = html_nodes(.,'td:nth-child(2)') %>% html_text(),
#     md = html_nodes(.,'td:nth-child(1)') %>% html_text(),
#     pt = html_nodes(.,'td~ td+ td') %>% html_text()
#   )
# }
data = read.csv("/home/ikanx101githubio/Documents/Live-Session-Nutrifood-R/hasil scrape BPOM.csv")
knitr::kable(head(data))
str(data)
library(dplyr)
library(tidyr)
nomnoml::nomnoml("#direction: down,
[raw data] -> [ket]
[raw data] -> [pt]
[ket] -> [separate I]
[separate I] -> [deskripsi]
[separate I] -> [ket lainnya]
[ket lainnya] -> [separate II]
[separate II] -> [merek]
[separate II] -> [kemasan]
[pt] -> [separate III]
[separate III] -> [nama perusahaan]
[separate III] -> [pt lainnya]
[pt lainnya] -> [separate IV]
[separate IV] -> [kota / kabupaten]
[separate IV] -> [provinsi]
[deskripsi] -> [cleaned data]
[merek] -> [cleaned data]
[kemasan] -> [cleaned data]
[nama perusahaan] -> [cleaned data]
[kota / kabupaten] -> [cleaned data]
[provinsi] -> [cleaned data]
")
data =
data %>%
separate(ket,into=c('deskripsi','lainnya'),sep='Merk: ') %>%
separate(lainnya,into=c('merek','kemasan'),sep='Kemasan: ')
knitr::kable(head(data))
data =
data %>%
separate(pt,into=c("pt_lainnya","provinsi"),sep="\\, ") %>%
separate(pt_lainnya,into=c('pt_lainnya','kota'),sep="Kota ") %>%
separate(pt_lainnya,into=c('nama_perusahaan','kabupaten'),sep="Kab. ")
knitr::kable(head(data))
data =
data %>%
mutate(deskripsi = trimws(deskripsi),
merek = trimws(merek),
kemasan = trimws(kemasan),
nama_perusahaan = trimws(nama_perusahaan),
kabupaten = trimws(kabupaten),
kota = trimws(kota),
provinsi = trimws(provinsi),
kota_kab = ifelse(is.na(kota),paste0("Kab. ",kabupaten),kota)
) %>%
mutate(nama_perusahaan = toupper(nama_perusahaan),
nama_perusahaan = gsub("[^[:alnum:] ]"," ",nama_perusahaan),
nama_perusahaan = stringr::str_squish(nama_perusahaan),
kemasan = tolower(kemasan),
kemasan = gsub("[^[:alnum:] ]"," ",kemasan),
kemasan = stringr::str_squish(kemasan),
jenis_kemasan = stringr::word(kemasan,1)
) %>%
select(merek,deskripsi,kemasan,jenis_kemasan,nama_perusahaan,kota_kab,provinsi) %>%
distinct()
knitr::kable(head(data,10),caption = "Data Final Clean")
data %>%
group_by(provinsi)
```{r,warning=FALSE,message=FALSE}
data %>%
group_by(provinsi) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq))
data %>% filter(is.na(provinsi))
data %>% filter(is.na(provinsi)) %>% View()
data = read.csv("/home/ikanx101githubio/Documents/Live-Session-Nutrifood-R/hasil scrape BPOM.csv")
View(data)
data %>% filter(grepl("YUMMY BITES",ket)) %>% View()
data %>%
group_by(provinsi) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/ikanx101.com/_posts/data carpentry/bpom")
rm(list=ls())
knitr::include_graphics("https://raw.githubusercontent.com/ikanx101/Live-Session-Nutrifood-R/master/bpom.png")
# url = 'nama url di sini'
# data = read_html(url) %>% {
#   tibble(
#     ket = html_nodes(.,'td:nth-child(2)') %>% html_text(),
#     md = html_nodes(.,'td:nth-child(1)') %>% html_text(),
#     pt = html_nodes(.,'td~ td+ td') %>% html_text()
#   )
# }
data = read.csv("/home/ikanx101githubio/Documents/Live-Session-Nutrifood-R/hasil scrape BPOM.csv")
knitr::kable(head(data))
str(data)
library(dplyr)
library(tidyr)
nomnoml::nomnoml("#direction: down,
[raw data] -> [ket]
[raw data] -> [pt]
[ket] -> [separate I]
[separate I] -> [deskripsi]
[separate I] -> [ket lainnya]
[ket lainnya] -> [separate II]
[separate II] -> [merek]
[separate II] -> [kemasan]
[pt] -> [separate III]
[separate III] -> [nama perusahaan]
[separate III] -> [pt lainnya]
[pt lainnya] -> [separate IV]
[separate IV] -> [kota / kabupaten]
[separate IV] -> [provinsi]
[deskripsi] -> [cleaned data]
[merek] -> [cleaned data]
[kemasan] -> [cleaned data]
[nama perusahaan] -> [cleaned data]
[kota / kabupaten] -> [cleaned data]
[provinsi] -> [cleaned data]
")
data =
data %>%
separate(ket,into=c('deskripsi','lainnya'),sep='Merk: ') %>%
separate(lainnya,into=c('merek','kemasan'),sep='Kemasan: ')
knitr::kable(head(data))
data =
data %>%
separate(pt,into=c("pt_lainnya","provinsi"),sep="\\, ") %>%
separate(pt_lainnya,into=c('pt_lainnya','kota'),sep="Kota ") %>%
separate(pt_lainnya,into=c('nama_perusahaan','kabupaten'),sep="Kab. ")
knitr::kable(head(data))
data =
data %>%
mutate(deskripsi = trimws(deskripsi),
merek = trimws(merek),
kemasan = trimws(kemasan),
nama_perusahaan = trimws(nama_perusahaan),
kabupaten = trimws(kabupaten),
kota = trimws(kota),
provinsi = trimws(provinsi),
kota_kab = ifelse(is.na(kota),paste0("Kab. ",kabupaten),kota)
) %>%
mutate(nama_perusahaan = toupper(nama_perusahaan),
nama_perusahaan = gsub("[^[:alnum:] ]"," ",nama_perusahaan),
nama_perusahaan = stringr::str_squish(nama_perusahaan),
kemasan = tolower(kemasan),
kemasan = gsub("[^[:alnum:] ]"," ",kemasan),
kemasan = stringr::str_squish(kemasan),
jenis_kemasan = stringr::word(kemasan,1)
) %>%
select(merek,deskripsi,kemasan,jenis_kemasan,nama_perusahaan,kota_kab,provinsi) %>%
distinct()
knitr::kable(head(data,10),caption = "Data Final Clean")
data %>%
group_by(provinsi) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
data %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
data %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(10)
data %>%
group_by(jenis_kemasan) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
data %>%
filter(grepl("jawa barat",provinsi,ignore.case = T)) %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
data %>%
filter(grepl("jawa barat",provinsi,ignore.case = T)) %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq))
data %>%
filter(grepl("jawa barat",provinsi,ignore.case = T)) %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(10)
data %>%
group_by(jenis_kemasan) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(7)
data %>%
group_by(provinsi) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5) %>%
knitr::kable()
tes = "ikanx101 g5 100 l"
tes
gsub("[A:Z,a:z]","",tes)
gsub("[A-Z,a-z]","",tes)
library(dplyr)
library(rvest)
url = "http://bppsdmk.kemkes.go.id/info_sdmk/info/index?prov=11&&rumpun=101"
read_html(url) %>% html_table(fill = T)
setwd("~/Documents/ikanx101.com/_posts/nakes data")
