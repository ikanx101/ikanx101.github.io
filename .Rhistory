setwd("~/Documents/ikanx101.com/_posts/data carpentry/bpom")
rm(list=ls())
knitr::include_graphics("https://raw.githubusercontent.com/ikanx101/Live-Session-Nutrifood-R/master/bpom.png")
# url = 'nama url di sini'
# data = read_html(url) %>% {
#   tibble(
#     ket = html_nodes(.,'td:nth-child(2)') %>% html_text(),
#     md = html_nodes(.,'td:nth-child(1)') %>% html_text(),
#     pt = html_nodes(.,'td~ td+ td') %>% html_text()
#   )
# }
data = read.csv("/home/ikanx101githubio/Documents/Live-Session-Nutrifood-R/hasil scrape BPOM.csv")
knitr::kable(head(data))
str(data)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/ikanx101.com/_posts/data carpentry/bpom")
rm(list=ls())
knitr::include_graphics("https://raw.githubusercontent.com/ikanx101/Live-Session-Nutrifood-R/master/bpom.png")
# url = 'nama url di sini'
# data = read_html(url) %>% {
#   tibble(
#     ket = html_nodes(.,'td:nth-child(2)') %>% html_text(),
#     md = html_nodes(.,'td:nth-child(1)') %>% html_text(),
#     pt = html_nodes(.,'td~ td+ td') %>% html_text()
#   )
# }
data = read.csv("/home/ikanx101githubio/Documents/Live-Session-Nutrifood-R/hasil scrape BPOM.csv")
knitr::kable(head(data))
str(data)
library(dplyr)
library(tidyr)
nomnoml::nomnoml("#direction: down,
[raw data] -> [ket]
[raw data] -> [pt]
[ket] -> [separate I]
[separate I] -> [deskripsi]
[separate I] -> [ket lainnya]
[ket lainnya] -> [separate II]
[separate II] -> [merek]
[separate II] -> [kemasan]
[pt] -> [separate III]
[separate III] -> [nama perusahaan]
[separate III] -> [pt lainnya]
[pt lainnya] -> [separate IV]
[separate IV] -> [kota / kabupaten]
[separate IV] -> [provinsi]
[deskripsi] -> [cleaned data]
[merek] -> [cleaned data]
[kemasan] -> [cleaned data]
[nama perusahaan] -> [cleaned data]
[kota / kabupaten] -> [cleaned data]
[provinsi] -> [cleaned data]
")
data =
data %>%
separate(ket,into=c('deskripsi','lainnya'),sep='Merk: ') %>%
separate(lainnya,into=c('merek','kemasan'),sep='Kemasan: ')
knitr::kable(head(data))
data =
data %>%
separate(pt,into=c("pt_lainnya","provinsi"),sep="\\, ") %>%
separate(pt_lainnya,into=c('pt_lainnya','kota'),sep="Kota ") %>%
separate(pt_lainnya,into=c('nama_perusahaan','kabupaten'),sep="Kab. ")
knitr::kable(head(data))
data =
data %>%
mutate(deskripsi = trimws(deskripsi),
merek = trimws(merek),
kemasan = trimws(kemasan),
nama_perusahaan = trimws(nama_perusahaan),
kabupaten = trimws(kabupaten),
kota = trimws(kota),
provinsi = trimws(provinsi),
kota_kab = ifelse(is.na(kota),paste0("Kab. ",kabupaten),kota)
) %>%
mutate(nama_perusahaan = toupper(nama_perusahaan),
nama_perusahaan = gsub("[^[:alnum:] ]"," ",nama_perusahaan),
nama_perusahaan = stringr::str_squish(nama_perusahaan),
kemasan = tolower(kemasan),
kemasan = gsub("[^[:alnum:] ]"," ",kemasan),
kemasan = stringr::str_squish(kemasan),
jenis_kemasan = stringr::word(kemasan,1)
) %>%
select(merek,deskripsi,kemasan,jenis_kemasan,nama_perusahaan,kota_kab,provinsi) %>%
distinct()
knitr::kable(head(data,10),caption = "Data Final Clean")
data %>%
group_by(provinsi)
```{r,warning=FALSE,message=FALSE}
data %>%
group_by(provinsi) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq))
data %>% filter(is.na(provinsi))
data %>% filter(is.na(provinsi)) %>% View()
data = read.csv("/home/ikanx101githubio/Documents/Live-Session-Nutrifood-R/hasil scrape BPOM.csv")
View(data)
data %>% filter(grepl("YUMMY BITES",ket)) %>% View()
data %>%
group_by(provinsi) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/ikanx101.com/_posts/data carpentry/bpom")
rm(list=ls())
knitr::include_graphics("https://raw.githubusercontent.com/ikanx101/Live-Session-Nutrifood-R/master/bpom.png")
# url = 'nama url di sini'
# data = read_html(url) %>% {
#   tibble(
#     ket = html_nodes(.,'td:nth-child(2)') %>% html_text(),
#     md = html_nodes(.,'td:nth-child(1)') %>% html_text(),
#     pt = html_nodes(.,'td~ td+ td') %>% html_text()
#   )
# }
data = read.csv("/home/ikanx101githubio/Documents/Live-Session-Nutrifood-R/hasil scrape BPOM.csv")
knitr::kable(head(data))
str(data)
library(dplyr)
library(tidyr)
nomnoml::nomnoml("#direction: down,
[raw data] -> [ket]
[raw data] -> [pt]
[ket] -> [separate I]
[separate I] -> [deskripsi]
[separate I] -> [ket lainnya]
[ket lainnya] -> [separate II]
[separate II] -> [merek]
[separate II] -> [kemasan]
[pt] -> [separate III]
[separate III] -> [nama perusahaan]
[separate III] -> [pt lainnya]
[pt lainnya] -> [separate IV]
[separate IV] -> [kota / kabupaten]
[separate IV] -> [provinsi]
[deskripsi] -> [cleaned data]
[merek] -> [cleaned data]
[kemasan] -> [cleaned data]
[nama perusahaan] -> [cleaned data]
[kota / kabupaten] -> [cleaned data]
[provinsi] -> [cleaned data]
")
data =
data %>%
separate(ket,into=c('deskripsi','lainnya'),sep='Merk: ') %>%
separate(lainnya,into=c('merek','kemasan'),sep='Kemasan: ')
knitr::kable(head(data))
data =
data %>%
separate(pt,into=c("pt_lainnya","provinsi"),sep="\\, ") %>%
separate(pt_lainnya,into=c('pt_lainnya','kota'),sep="Kota ") %>%
separate(pt_lainnya,into=c('nama_perusahaan','kabupaten'),sep="Kab. ")
knitr::kable(head(data))
data =
data %>%
mutate(deskripsi = trimws(deskripsi),
merek = trimws(merek),
kemasan = trimws(kemasan),
nama_perusahaan = trimws(nama_perusahaan),
kabupaten = trimws(kabupaten),
kota = trimws(kota),
provinsi = trimws(provinsi),
kota_kab = ifelse(is.na(kota),paste0("Kab. ",kabupaten),kota)
) %>%
mutate(nama_perusahaan = toupper(nama_perusahaan),
nama_perusahaan = gsub("[^[:alnum:] ]"," ",nama_perusahaan),
nama_perusahaan = stringr::str_squish(nama_perusahaan),
kemasan = tolower(kemasan),
kemasan = gsub("[^[:alnum:] ]"," ",kemasan),
kemasan = stringr::str_squish(kemasan),
jenis_kemasan = stringr::word(kemasan,1)
) %>%
select(merek,deskripsi,kemasan,jenis_kemasan,nama_perusahaan,kota_kab,provinsi) %>%
distinct()
knitr::kable(head(data,10),caption = "Data Final Clean")
data %>%
group_by(provinsi) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
data %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
data %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(10)
data %>%
group_by(jenis_kemasan) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
data %>%
filter(grepl("jawa barat",provinsi,ignore.case = T)) %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5)
data %>%
filter(grepl("jawa barat",provinsi,ignore.case = T)) %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq))
data %>%
filter(grepl("jawa barat",provinsi,ignore.case = T)) %>%
group_by(kota_kab) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(10)
data %>%
group_by(jenis_kemasan) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(7)
data %>%
group_by(provinsi) %>%
summarise(freq = n()) %>%
ungroup() %>%
arrange(desc(freq)) %>%
head(5) %>%
knitr::kable()
tes = "ikanx101 g5 100 l"
tes
gsub("[A:Z,a:z]","",tes)
gsub("[A-Z,a-z]","",tes)
library(dplyr)
library(rvest)
url = "http://bppsdmk.kemkes.go.id/info_sdmk/info/index?prov=11&&rumpun=101"
read_html(url) %>% html_table(fill = T)
setwd("~/Documents/ikanx101.com/_posts/nakes data")
library(dplyr)
library(rvest)
library(tidyr)
rm(list=ls())
setwd("~/Documents/ikanx101.com/_posts/nakes data")
dbase_link = readLines("link dokter.txt")
scrape = function(url){
data = read_html(url) %>% html_table(fill = T)
data = data[[1]]
colnames(data) = data[1,]
data = data[-1,]
data$prov = read_html(url) %>% html_nodes("h3") %>% html_text()
data =
data %>%
separate(prov,into = c("hapus","provinsi"),sep = "Provinsi ") %>%
mutate(hapus = NULL)
return(data)
}
data = scrape(dbase_link[1])
for(i in 2:length(dbase_link)){
temp = scrape(dbase_link[i])
data = rbind(data,temp)
}
data =
data %>%
janitor::clean_names() %>%
filter(no!="Total") %>%
mutate()
colnames(data) = c("no","Nama Kab/Kota","Jumlah Unit","Dokter Umum","Dokter Gigi","Dokter Spesialis",
"Dokter Sub Spesialis","Dokter Gigi Spesialis dan Sub Spesialis","Jumlah Total","Provinsi")
data %>% openxlsx::write.xlsx("Data Dokter.xlsx")
library(dplyr)
library(rvest)
library(tidyr)
rm(list=ls())
setwd("~/Documents/ikanx101.com/_posts/nakes data")
dbase_link = readLines("link dokter.txt")
scrape = function(url){
data = read_html(url) %>% html_table(fill = T)
data = data[[1]]
colnames(data) = data[1,]
data = data[-1,]
data$prov = read_html(url) %>% html_nodes("h3") %>% html_text()
data =
data %>%
separate(prov,into = c("hapus","provinsi"),sep = "Provinsi ") %>%
mutate(hapus = NULL)
return(data)
}
data = scrape(dbase_link[1])
for(i in 2:length(dbase_link)){
temp = scrape(dbase_link[i])
data = rbind(data,temp)
}
data =
data %>%
janitor::clean_names()
colnames(data)
data[no,]
data[,no]
data[,"no"]
target_numeric = colnames(data)
colnames(data)
target_numeric = colnames(data)[-2,-10]
target_numeric = colnames(data)[c(1,3:9)]
target_numeric
data[,target_numeric] = as.numeric(data[,target_numeric])
data[,target_numeric] = sapply(data[,target_numeric],as.numeric)
View(data)
library(dplyr)
library(ggplot2)
library(ggthemes)
rm(list=ls())
library(readxl)
data = read_excel("Course_Users_Stats_C236_2020_09_22_06_32.xls")
data =
data %>%
janitor::clean_names() %>%
mutate(progress = gsub("\\%","",progress),
progress = as.numeric(progress))
data %>%
ggplot(aes(x = progress)) +
geom_density(size = 2) +
theme_economist() +
labs(x = "Progress Trainees",
y = "Banyaknya Trainees",
title = "Sudah sampai mana progress trainees training R?",
subtitle = "\nTrainees Batch IV",
caption = "Sumber: Nutriversity\n17 Sept 2020 20:39 WIB") +
theme(axis.text.y = element_blank(),
plot.title = element_text(size = 18),
axis.text.x = element_text(face = "italic"))
ggsave("trainR.png",width = 8,height = 5,dpi=450)
setwd("~/Downloads")
library(dplyr)
library(ggplot2)
library(ggthemes)
rm(list=ls())
library(readxl)
data = read_excel("Course_Users_Stats_C236_2020_09_22_06_32.xls")
data =
data %>%
janitor::clean_names() %>%
mutate(progress = gsub("\\%","",progress),
progress = as.numeric(progress))
data %>%
ggplot(aes(x = progress)) +
geom_density(size = 2) +
theme_economist() +
labs(x = "Progress Trainees",
y = "Banyaknya Trainees",
title = "Sudah sampai mana progress trainees training R?",
subtitle = "\nTrainees Batch IV",
caption = "Sumber: Nutriversity\n17 Sept 2020 20:39 WIB") +
theme(axis.text.y = element_blank(),
plot.title = element_text(size = 18),
axis.text.x = element_text(face = "italic"))
ggsave("trainR.png",width = 8,height = 5,dpi=450)
library(dplyr)
library(ggplot2)
library(ggthemes)
rm(list=ls())
library(readxl)
data = read_excel("Course_Users_Stats_C236_2020_09_22_06_32.xls")
data =
data %>%
janitor::clean_names() %>%
mutate(progress = gsub("\\%","",progress),
progress = as.numeric(progress))
data %>%
ggplot(aes(x = progress)) +
geom_density(size = 2) +
theme_economist() +
labs(x = "Progress Trainees",
y = "Banyaknya Trainees",
title = "Sudah sampai mana progress trainees training R?",
subtitle = "\nTrainees Batch IV",
caption = "Sumber: Nutriversity\n22 Sept 2020 13:33 WIB") +
theme(axis.text.y = element_blank(),
plot.title = element_text(size = 18),
axis.text.x = element_text(face = "italic"))
ggsave("trainR.png",width = 8,height = 5,dpi=450)
library(dplyr)
library(ggplot2)
library(ggthemes)
rm(list=ls())
library(readxl)
data = read_excel("Course_Users_Stats_C236_2020_09_22_06_32.xls")
data =
data %>%
janitor::clean_names() %>%
mutate(progress = gsub("\\%","",progress),
progress = as.numeric(progress))
data %>%
ggplot(aes(x = progress)) +
geom_density(size = 2) +
theme_economist() +
labs(x = "Progress Trainees",
y = "Banyaknya Trainees",
title = "Sudah sampai mana progress trainees training R?",
subtitle = "\nTrainees Batch IV",
caption = "Sumber: Nutriversity\n22 Sept 2020 13:33 WIB") +
theme(axis.text.y = element_blank(),
plot.title = element_text(size = 18),
axis.text.x = element_text(face = "italic"))
ggsave("trainR.png",width = 8,height = 5,dpi=450)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/ikanx101.github.io/_posts/nakes data/Bagian 3")
setwd("~/Documents/ikanx101.com/_posts/nakes data/Bagian 3")
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/ikanx101.com/_posts/nakes data/Bagian 3")
rm(list=ls())
library(readxl)
library(dplyr)
library(ggplot2)
library(ggthemes)
data =
read_excel("~/ikanx101.github.io/_posts/nakes data/Bagian 2/Data Dokter.xlsx") %>%
janitor::clean_names()
knitr::opts_chunk$set(echo = TRUE)
setwd("~/Documents/ikanx101.com/_posts/nakes data/Bagian 3")
rm(list=ls())
library(readxl)
library(dplyr)
library(ggplot2)
library(ggthemes)
data =
read_excel("~/Documents/ikanx101.com/_posts/nakes data/Bagian 2/Data Dokter.xlsx") %>%
janitor::clean_names()
View(data)
colnames(data)[4:9]
colnames(data)[4:8]
mean_umum = mean(data$dokter_umum)
median_umum = median(data$dokter_umum)
head =
data %>%
arrange(desc(dokter_umum)) %>%
head(30)
tail =
data %>%
arrange(desc(dokter_umum)) %>%
tail(30)
merge(head,tail)
ggplot(aes(x = reorder(nama_kab_kota,dokter_umum),
y = dokter_umum)) +
geom_col(aes(fill = dokter_umum)) +
geom_hline(yintercept = mean_umum, color = "darkred",size = 2) +
geom_hline(yintercept = median_umum, color = "darkgreen",size = 2) +
coord_flip() +
labs(title = "Banyaknya Dokter Umum per Kabupaten dan Kota",
subtitle = "Top 30 Kabupaten dan Kota",
caption = "Garis merah: mean dan garis hijau: median\nVisualized using R\nikanx101.com") +
theme_minimal() +
theme(axis.title = element_blank(),
axis.text.y = element_text(size = 8),
legend.position = "none")
mean_umum = mean(data$dokter_umum)
median_umum = median(data$dokter_umum)
head =
data %>%
arrange(desc(dokter_umum)) %>%
head(30)
tail =
data %>%
arrange(desc(dokter_umum)) %>%
tail(30)
merge(head,tail) %>%
ggplot(aes(x = reorder(nama_kab_kota,dokter_umum),
y = dokter_umum)) +
geom_col(aes(fill = dokter_umum)) +
geom_hline(yintercept = mean_umum, color = "darkred",size = 2) +
geom_hline(yintercept = median_umum, color = "darkgreen",size = 2) +
coord_flip() +
labs(title = "Banyaknya Dokter Umum per Kabupaten dan Kota",
subtitle = "Top 30 Kabupaten dan Kota",
caption = "Garis merah: mean dan garis hijau: median\nVisualized using R\nikanx101.com") +
theme_minimal() +
theme(axis.title = element_blank(),
axis.text.y = element_text(size = 8),
legend.position = "none")
head =
data %>%
arrange(desc(dokter_umum)) %>%
head(30)
View(head)
mean_umum = mean(data$dokter_umum)
median_umum = median(data$dokter_umum)
head =
data %>%
arrange(desc(dokter_umum)) %>%
head(30)
tail =
data %>%
arrange(desc(dokter_umum)) %>%
tail(30)
rbind(head,tail) %>%
ggplot(aes(x = reorder(nama_kab_kota,dokter_umum),
y = dokter_umum)) +
geom_col(aes(fill = dokter_umum)) +
geom_hline(yintercept = mean_umum, color = "darkred",size = 2) +
geom_hline(yintercept = median_umum, color = "darkgreen",size = 2) +
coord_flip() +
labs(title = "Banyaknya Dokter Umum per Kabupaten dan Kota",
subtitle = "Top 30 Kabupaten dan Kota",
caption = "Garis merah: mean dan garis hijau: median\nVisualized using R\nikanx101.com") +
theme_minimal() +
theme(axis.title = element_blank(),
axis.text.y = element_text(size = 8),
legend.position = "none")
